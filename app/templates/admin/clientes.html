{% extends "base.html" %}
{% block title %}GestÃ£o de Clientes | Modulus Admin{% endblock %}

{% block content %}
<style>
    .admin-container { padding: 20px; }
    .header-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .btn-create { background-color: #3182ce; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; transition: background 0.2s; }
    .btn-create:hover { background-color: #2c5282; }

    .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .status-active { background-color: #c6f6d5; color: #22543d; }
    .status-suspended { background-color: #feebc8; color: #744210; }
    .status-archived { background-color: #fed7d7; color: #822727; }

    .admin-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
    .admin-table th { background-color: #f7fafc; padding: 15px; text-align: left; color: #4a5568; font-size: 14px; border-bottom: 2px solid #edf2f7; }
    .admin-table td { padding: 15px; border-bottom: 1px solid #edf2f7; font-size: 14px; }

    .action-buttons { display: flex; gap: 8px; }
    .btn-small { padding: 5px 10px; border-radius: 4px; font-size: 12px; cursor: pointer; border: 1px solid #e2e8f0; background: white; font-weight: 600; text-decoration: none; display: inline-block; }
    
    .btn-suspend { color: #dd6b20; border-color: #dd6b20; }
    .btn-suspend:hover { background: #dd6b20; color: white; }
    
    .btn-activate { color: #38a169; border-color: #38a169; }
    .btn-activate:hover { background: #38a169; color: white; }

    .btn-modules { color: #4299e1; border-color: #4299e1; }
    .btn-modules:hover { background: #4299e1; color: white; }
</style>

<div class="admin-container">
    <div class="header-actions">
        <div>
            <h1 class="page-title" style="margin:0">Painel de Clientes SaaS</h1>
            <p style="color: #718096; margin-top: 5px;">Gerencie as licenÃ§as e acessos das academias.</p>
        </div>
        <a href="{{ url_for('admin.criar_cliente') }}" class="btn-create">+ Novo Cliente</a>
    </div>

    <div class="card" style="padding: 0;">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nome da Academia</th>
                    <th>Slug</th>
                    <th>Status Global</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody>
                {% for tenant in tenants %}
                <tr>
                    <td style="font-weight: bold; color: #2d3748;">{{ tenant.name }}</td>
                    <td style="color: #718096;">/{{ tenant.slug }}</td>
                    <td>
                        <span class="status-badge status-{{ tenant.status }}">
                            {{ tenant.status|upper }}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="{{ url_for('admin.gerenciar_modulos_cliente', tenant_id=tenant.id) }}" class="btn-small btn-modules">
                                ðŸ“¦ MÃ³dulos
                            </a>

                            {% if tenant.status == 'active' %}
                                <form action="{{ url_for('admin.alterar_status', tenant_id=tenant.id, novo_status='suspended') }}" method="POST" style="margin:0;">
                                    <button type="submit" class="btn-small btn-suspend">Suspender</button>
                                </form>
                            {% else %}
                                <form action="{{ url_for('admin.alterar_status', tenant_id=tenant.id, novo_status='active') }}" method="POST" style="margin:0;">
                                    <button type="submit" class="btn-small btn-activate">Reativar</button>
                                </form>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" style="text-align: center; padding: 40px; color: #a0aec0;">
                        Nenhuma academia cadastrada.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}